<html>

  <head>
    <link href="./manifest.webmanifest" rel="manifest">
  </head>
  <body>
    PWA
    <button id="button_confirm">
      Let's Confirm!
    </button>
  </body>


  
<script>

  window.onload = () => { init() }                                       
  init = () => {                                                         
    installSW()                                                          

    console.log(button_confirm)
    button_confirm.addEventListener("click", (e) => {
      alert("Start")
      if("Notification" in window) {
        alert("Notification is here.")
      } else {
        alert("Nothing...")
      }
      Notification.requestPermission()
      .then((result) => {
        alert(`THEN ${result}`)
      })
      .catch((result) => {
        alert(`CATCH ${result}`)
      })
    })
  }                                                                      
                                                                       
  //  サービスワーカーをインストールする。                               
  installSW = () => {                                                    
    if('serviceWorker' in navigator) {                                   
      navigator.serviceWorker.register('./sw.js')             
      .then(() => {                                                      
          console.log("Service Worker Registered.")                      
        }                                                                
      )                                                                  
      .finally(() => {                                                   
          console.log("Service Worker Finished.")                        
      })                                                                 
    }                                                                    
  }

</script>

</html>
